{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8000","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"paths":{"/users/profile":{"get":{"tags":["user-controller"],"summary":"获取我的个人资料","description":"获取当前登录用户的个人资料。返回公共账户信息，以及根据用户角色返回家教或学生的专属资料。\n需在请求头中携带 Authorization Token。\n","operationId":"getMyProfile","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MyProfileDTO"}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["user-controller"],"summary":"修改我的个人资料","description":"修改当前登录用户的个人资料，需在请求头中带上 Authorization Token。\n支持修改地址、家教专属字段、学生专属字段，系统会根据角色自动匹配。\n","operationId":"updateMyProfile","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileUpdateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}},"security":[{"bearerAuth":[]}]}},"/tutors":{"get":{"tags":["tutor-controller"],"summary":"获取所有家教（后台、测试用）","operationId":"getAllTutors","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Tutor"}}}}}}},"post":{"tags":["tutor-controller"],"summary":"新增家教（后台、测试用）","operationId":"createTutor","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tutor"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Tutor"}}}}}}},"/tasks":{"post":{"tags":["task-controller"],"summary":"发布新任务","description":"发布一个新任务","operationId":"createTask","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCreateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskDTO"}}}}}}},"/tasks/{task_id}/applications":{"get":{"tags":["task-controller"],"summary":"获取任务申请列表","description":"获取指定任务下的所有申请","operationId":"getApplications","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskApplicationDTO"}}}}}}},"post":{"tags":["task-controller"],"summary":"家教申请任务","description":"家教提交对任务的申请，重复申请会被拒绝","operationId":"applyForTask","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskApplicationRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/tasks/{task_id}/applications/{application_id}/decision":{"post":{"tags":["task-controller"],"summary":"审核任务申请","description":"接受或拒绝任务申请","operationId":"reviewApplication","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"application_id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskApplicationDecisionDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskApplicationDTO"}}}}}}},"/messages":{"get":{"tags":["message-controller"],"operationId":"getAllMessages","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Message"}}}}}}},"post":{"tags":["message-controller"],"operationId":"sendMessage","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/availability":{"get":{"tags":["available-slot-controller"],"operationId":"getAllSlots","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AvailableSlot"}}}}}}},"post":{"tags":["available-slot-controller"],"operationId":"addSlot","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailableSlot"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AvailableSlot"}}}}}}},"/auth/register":{"post":{"tags":["auth-controller"],"summary":"register","operationId":"register","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}},{"name":"password","in":"query","required":true,"schema":{"type":"string"}},{"name":"role","in":"query","required":true,"schema":{"type":"string"}},{"name":"name","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"security":[{"bearerAuth":[]}]}},"/auth/login":{"post":{"tags":["auth-controller"],"summary":"login","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}},"security":[{"bearerAuth":[]}]}},"/appointments":{"get":{"tags":["appointment-controller"],"operationId":"getAllAppointments","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Appointment"}}}}}}},"post":{"tags":["appointment-controller"],"operationId":"createAppointment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Appointment"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Appointment"}}}}}}},"/applications":{"get":{"tags":["task-application-controller"],"operationId":"getAllApplications","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskApplication"}}}}}}},"post":{"tags":["task-application-controller"],"operationId":"applyForTask_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskApplication"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskApplication"}}}}}}},"/tasks/{task_id}/status":{"patch":{"tags":["task-controller"],"summary":"修改任务状态","description":"修改任务状态，如 Open、Closed","operationId":"updateTaskStatus","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskStatusUpdateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskDTO"}}}}}}},"/users/locations":{"get":{"tags":["user-controller"],"summary":"Get all users locations","description":"Get all users locations","operationId":"getAllUserLocations","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserLocationDTO"}}}}}}}},"/tutors/search":{"get":{"tags":["tutor-controller"],"summary":"地图家教搜索（前台用）","operationId":"searchTutors","parameters":[{"name":"north","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"south","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"east","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"west","in":"query","required":true,"schema":{"type":"number","format":"double"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TutorProfileSearchPageDTO"}}}}}}}},"/tasks/{task_id}":{"get":{"tags":["task-controller"],"summary":"获取任务详情","description":"根据任务 ID 获取任务详情","operationId":"getTaskById","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskDTO"}}}}}},"delete":{"tags":["task-controller"],"summary":"删除任务","description":"根据任务 ID 删除任务","operationId":"deleteTask","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/tasks/search":{"get":{"tags":["task-controller"],"summary":"地图筛选任务","description":"根据地图边界经纬度筛选任务","operationId":"searchTasksByLocation","parameters":[{"name":"minLat","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"maxLat","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"minLng","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"maxLng","in":"query","required":true,"schema":{"type":"number","format":"double"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskSearchDTO"}}}}}}}},"/tasks/my_tasks":{"get":{"tags":["task-controller"],"summary":"获取我发布的任务","description":"获取当前用户发布的所有任务","operationId":"getMyTasks","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskDTO"}}}}}}}},"/tasks/my_applications":{"get":{"tags":["task-controller"],"summary":"获取我申请的任务","description":"获取当前家教申请过的所有任务","operationId":"getMyApplications","parameters":[{"name":"tutor_id","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"type":"object","additionalProperties":{"type":"object"}}}}}}}}},"/map/users":{"get":{"tags":["map-controller"],"operationId":"searchUsersByLocation","parameters":[{"name":"role","in":"query","required":true,"schema":{"type":"string"}},{"name":"north","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"south","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"east","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"west","in":"query","required":true,"schema":{"type":"number","format":"double"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserLocationDTO"}}}}}}}},"/applications/{id}":{"get":{"tags":["task-application-controller"],"operationId":"getApplicationById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskApplication"}}}}}},"delete":{"tags":["task-application-controller"],"operationId":"deleteApplication","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/applications/my_applications":{"get":{"tags":["task-application-controller"],"operationId":"getMyApplications_1","parameters":[{"name":"tutorId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskApplication"}}}}}}}}},"components":{"schemas":{"ProfileUpdateDTO":{"type":"object","properties":{"address":{"type":"string"},"tutorProfile":{"$ref":"#/components/schemas/TutorProfileUpdateDTO"},"studentProfile":{"$ref":"#/components/schemas/StudentProfileUpdateDTO"}}},"StudentProfileUpdateDTO":{"type":"object","properties":{"educationLevel":{"type":"string"},"subjectNeed":{"type":"string"},"addressArea":{"type":"string"},"briefDescription":{"type":"string"}}},"TutorProfileUpdateDTO":{"type":"object","properties":{"bio":{"type":"string"},"expertise":{"type":"string"},"hourlyRate":{"type":"integer","format":"int32"},"yearsOfExperience":{"type":"integer","format":"int32"},"certifications":{"type":"string"}}},"Tutor":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"bio":{"type":"string"},"expertise":{"type":"string"},"hourlyRate":{"type":"integer","format":"int32"},"yearsOfExperience":{"type":"integer","format":"int32"},"certifications":{"type":"string"}}},"TaskCreateDTO":{"type":"object","properties":{"title":{"type":"string"},"subject":{"type":"string"},"description":{"type":"string"},"address":{"type":"string"},"lat":{"type":"number","format":"double"},"lng":{"type":"number","format":"double"},"budget":{"type":"string"},"deadline":{"type":"string","format":"date-time"}}},"TaskDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"title":{"type":"string"},"subject":{"type":"string"},"description":{"type":"string"},"address":{"type":"string"},"lat":{"type":"number","format":"double"},"lng":{"type":"number","format":"double"},"budget":{"type":"string"},"deadline":{"type":"string","format":"date-time"},"status":{"type":"string"},"acceptedTutorId":{"type":"integer","format":"int64"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"studentName":{"type":"string"},"studentEducationLevel":{"type":"string"}}},"TaskApplicationRequestDTO":{"type":"object","properties":{"tutorId":{"type":"integer","format":"int64"},"bidAmount":{"type":"integer","format":"int32"},"message":{"type":"string"}}},"TaskApplicationDecisionDTO":{"type":"object","properties":{"status":{"type":"string"}}},"TaskApplicationDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"taskId":{"type":"integer","format":"int64"},"tutorId":{"type":"integer","format":"int64"},"bidAmount":{"type":"integer","format":"int32"},"message":{"type":"string"},"status":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"Message":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"senderId":{"type":"integer","format":"int64"},"receiverId":{"type":"integer","format":"int64"},"content":{"type":"string"},"sentAt":{"type":"string","format":"date-time"}}},"AvailableSlot":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"tutorId":{"type":"integer","format":"int64"},"subject":{"type":"string"},"startTime":{"type":"string","format":"date-time"},"endTime":{"type":"string","format":"date-time"}}},"LoginRequestDTO":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"Appointment":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"studentId":{"type":"integer","format":"int64"},"tutorId":{"type":"integer","format":"int64"},"slotId":{"type":"integer","format":"int64"},"appointmentTime":{"type":"string","format":"date-time"},"status":{"type":"string"}}},"TaskApplication":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"taskId":{"type":"integer","format":"int64"},"tutorId":{"type":"integer","format":"int64"},"bidAmount":{"type":"integer","format":"int32"},"message":{"type":"string"},"appliedAt":{"type":"string","format":"date-time"},"status":{"type":"string"}}},"TaskStatusUpdateDTO":{"type":"object","properties":{"status":{"type":"string"}}},"MyProfileDTO":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserLoginDTO"},"roleProfile":{"type":"object"}}},"UserLoginDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"role":{"type":"string"},"name":{"type":"string"}}},"UserLocationDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"role":{"type":"string"},"lat":{"type":"number","format":"double"},"lng":{"type":"number","format":"double"},"address":{"type":"string"}}},"TutorProfileSearchPageDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"role":{"type":"string"},"lat":{"type":"number","format":"double"},"lng":{"type":"number","format":"double"},"address":{"type":"string"},"bio":{"type":"string"},"expertise":{"type":"string"},"hourlyRate":{"type":"integer","format":"int32"}}},"TaskSearchDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"subject":{"type":"string"},"address":{"type":"string"},"lat":{"type":"number","format":"double"},"lng":{"type":"number","format":"double"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}